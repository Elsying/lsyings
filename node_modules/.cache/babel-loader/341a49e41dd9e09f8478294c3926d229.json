{"remainingRequest":"D:\\Desktop\\pagepro\\lsying\\node_modules\\thread-loader\\dist\\cjs.js!D:\\Desktop\\pagepro\\lsying\\node_modules\\babel-loader\\lib\\index.js!D:\\Desktop\\pagepro\\lsying\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Desktop\\pagepro\\lsying\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Desktop\\pagepro\\lsying\\src\\views\\system\\sys-role\\sys-role-menu.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Desktop\\pagepro\\lsying\\src\\views\\system\\sys-role\\sys-role-menu.vue","mtime":1609569561000},{"path":"D:\\Desktop\\pagepro\\lsying\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Desktop\\pagepro\\lsying\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Desktop\\pagepro\\lsying\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Desktop\\pagepro\\lsying\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Desktop\\pagepro\\lsying\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.find\";\nimport \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport sysPermissionApi from '@/api/system/sys-permission-api';\nimport sysRoleApi from \"../../../api/system/sys-role-api\";\nexport default {\n  name: 'SysRoleMenu',\n  data: function data() {\n    return {\n      filterText: '',\n      data: null,\n      checkedKeys: null,\n      roleId: null,\n      roleName: null,\n      errorMessage: null\n    };\n  },\n  created: function created() {\n    var roleId = this.$route.params && this.$route.params.id;\n    console.log(roleId);\n    this.roleId = roleId;\n    this.getRole(roleId);\n  },\n  watch: {\n    filterText: function filterText(val) {\n      this.$refs.tree.filter(val);\n    }\n  },\n  methods: {\n    getMenus: function getMenus() {\n      var _this = this;\n\n      sysPermissionApi.getAllMenuTree().then(function (response) {\n        _this.data = response.data;\n      });\n    },\n    filterNode: function filterNode(value, data) {\n      if (!value) return true;\n      return data.name.indexOf(value) !== -1 || data.remark.indexOf(value) !== -1;\n    },\n    getRole: function getRole(roleId) {\n      var _this2 = this;\n\n      sysRoleApi.detail(roleId).then(function (response) {\n        if (response.code === 200) {\n          _this2.roleName = response.data.name;\n\n          _this2.loadData();\n        } else {\n          _this2.errorMessage = response.message;\n        }\n      });\n    },\n    loadData: function loadData() {\n      // 获取所有菜单\n      this.getMenus(); // 根据角色获取菜单\n\n      this.getMenuIdsByRoleId(this.roleId);\n    },\n    getMenuIdsByRoleId: function getMenuIdsByRoleId(roleId) {\n      var _this3 = this;\n\n      sysPermissionApi.getMenuIdsByRoleId(roleId).then(function (response) {\n        _this3.checkedKeys = response.data;\n      });\n    },\n    handleClose: function handleClose() {\n      var _this4 = this;\n\n      var view = this.$store.state.tagsView.visitedViews.find(function (item) {\n        return item.name === 'sysRoleMenu';\n      });\n      this.$store.dispatch('tagsView/delView', view).then(function (_ref) {\n        var visitedViews = _ref.visitedViews;\n\n        if (visitedViews) {\n          var latestView = visitedViews.slice(-1)[0];\n\n          _this4.$router.push(latestView.fullPath);\n        }\n      });\n    },\n    handleSave: function handleSave() {\n      var _this5 = this;\n\n      var ids = this.$refs.tree.getCheckedKeys();\n      console.log(ids);\n      var param = {\n        roleId: this.roleId,\n        permissionIds: ids\n      };\n      sysRoleApi.updateSysRolePermission(param).then(function (response) {\n        console.log(response.data);\n\n        if (response.code === 200) {\n          _this5.$message({\n            message: '保存成功',\n            type: 'success'\n          });\n\n          _this5.loadData();\n        }\n      });\n    }\n  }\n};",null]}