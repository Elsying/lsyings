{"remainingRequest":"C:\\Users\\r7000\\Desktop\\pagepro\\lsying\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\r7000\\Desktop\\pagepro\\lsying\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\r7000\\Desktop\\pagepro\\lsying\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\r7000\\Desktop\\pagepro\\lsying\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\r7000\\Desktop\\pagepro\\lsying\\src\\views\\system\\sys-menu\\components\\sys-menu.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\r7000\\Desktop\\pagepro\\lsying\\src\\views\\system\\sys-menu\\components\\sys-menu.vue","mtime":1609569561000},{"path":"C:\\Users\\r7000\\Desktop\\pagepro\\lsying\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\r7000\\Desktop\\pagepro\\lsying\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\r7000\\Desktop\\pagepro\\lsying\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\r7000\\Desktop\\pagepro\\lsying\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\r7000\\Desktop\\pagepro\\lsying\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.sort\";\nimport \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport TreeSelect from '@/components/TreeSelect';\nimport sysPermissionApi from '@/api/system/sys-permission-api';\nexport default {\n  name: 'SysMenu',\n  components: {\n    TreeSelect: TreeSelect\n  },\n  props: {\n    // detail: 详细页面，add: 添加页面，update：编辑页面\n    isDetail: {\n      type: Boolean,\n      default: false\n    },\n    isAdd: {\n      type: Boolean,\n      default: false\n    },\n    isUpdate: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data: function data() {\n    return {\n      dialogVisible: false,\n      innerVisible: false,\n      dialogTitle: null,\n      treeSelectData: null,\n      selectMenuName: null,\n      selectNode: null,\n      selectData: null,\n      menuIcon: '',\n      form: {\n        name: null,\n        icon: null,\n        code: null,\n        url: null,\n        type: null,\n        parentId: null,\n        level: 3,\n        state: 1,\n        sort: 0,\n        remark: null\n      },\n      updateId: null,\n      rules: {\n        // TODO 菜单路径必须以/开头\n        name: [{\n          required: true,\n          message: '请输入菜单名称',\n          trigger: 'blur'\n        }, {\n          min: 2,\n          max: 10,\n          message: '长度在 2 到 10 个字符',\n          trigger: 'blur'\n        }],\n        code: [{\n          required: true,\n          message: '请输入菜单编码',\n          trigger: 'blur'\n        }, {\n          min: 4,\n          max: 50,\n          message: '长度在 4 到 50 个字符',\n          trigger: 'blur'\n        }],\n        url: [{\n          required: true,\n          message: '请输入菜单路径',\n          trigger: 'blur'\n        }, {\n          min: 4,\n          max: 100,\n          message: '长度在 4 到 100 个字符',\n          trigger: 'blur'\n        }],\n        type: [{\n          required: true,\n          message: '请选择菜单类型',\n          trigger: 'change'\n        }],\n        state: [{\n          required: true,\n          message: '请选择状态',\n          trigger: 'change'\n        }]\n      }\n    };\n  },\n  computed: {},\n  created: function created() {},\n  methods: {\n    handle: function handle(id) {\n      if (this.isDetail) {\n        this.dialogTitle = '系统菜单详情';\n        this.getMenuDetail(id);\n        this.rules = null;\n      } else if (this.isAdd) {\n        this.dialogTitle = '新增系统菜单';\n      } else if (this.isUpdate) {\n        this.dialogTitle = '修改系统菜单';\n        this.updateId = id;\n        this.getMenuDetail(id);\n      }\n\n      this.getNavMenu();\n      this.dialogVisible = true;\n    },\n    getNavMenu: function getNavMenu() {\n      var _this = this;\n\n      sysPermissionApi.getNavMenuTree().then(function (response) {\n        _this.treeSelectData = response.data;\n\n        _this.showParentId();\n      });\n    },\n    handleMenuIcon: function handleMenuIcon() {\n      if (this.isDetail) {\n        return;\n      }\n\n      this.innerVisible = true;\n    },\n    choiceMenuIcon: function choiceMenuIcon(icon) {\n      this.menuIcon = icon;\n      this.innerVisible = false;\n      this.form.icon = icon;\n    },\n    showParentId: function showParentId() {\n      var _this2 = this;\n\n      this.$nextTick(function () {\n        _this2.$refs.treeSelect.getNode(_this2.form.parentId);\n      });\n    },\n    setParentIdAndLevel: function setParentIdAndLevel() {\n      if (!this.form.parentId) {\n        this.form.parentId = 0;\n      }\n\n      if (!this.selectData) {\n        this.form.level = 1;\n      } else if (this.selectData.level === 1) {\n        this.form.level = 2;\n      } else if (this.selectData.level === 2) {\n        this.form.level = 3;\n      }\n    },\n    submitAddForm: function submitAddForm() {\n      var _this3 = this;\n\n      this.$refs.sysMenuForm.validate(function (valid) {\n        if (valid) {\n          console.log('submit!');\n\n          _this3.addMenu();\n        } else {\n          console.log('error submit!!');\n          return false;\n        }\n      });\n    },\n    submitUpdateForm: function submitUpdateForm() {\n      var _this4 = this;\n\n      this.$refs.sysMenuForm.validate(function (valid) {\n        if (valid) {\n          console.log('submit!');\n\n          _this4.updateMenu(); // this.$emit(\"getList\")\n\n        } else {\n          console.log('error submit!!');\n          return false;\n        }\n      });\n    },\n    getMenuDetail: function getMenuDetail(id) {\n      var _this5 = this;\n\n      sysPermissionApi.detail(id).then(function (response) {\n        if (response.code === 200) {\n          _this5.form = response.data;\n          _this5.menuIcon = _this5.form.icon;\n        }\n      });\n    },\n    addMenu: function addMenu() {\n      var _this6 = this;\n\n      this.setParentIdAndLevel();\n      var addParam = {\n        name: this.form.name,\n        code: this.form.code,\n        icon: this.form.icon,\n        url: this.form.url,\n        type: this.form.type,\n        parentId: this.form.parentId,\n        level: this.form.level,\n        sort: this.form.sort,\n        state: this.form.state,\n        remark: this.form.remark\n      };\n      sysPermissionApi.add(addParam).then(function (response) {\n        if (response.code === 200) {\n          _this6.restForm();\n\n          _this6.$message({\n            message: '保存系统菜单成功',\n            type: 'success'\n          });\n\n          _this6.$emit('change');\n        }\n      });\n    },\n    updateMenu: function updateMenu() {\n      var _this7 = this;\n\n      this.setParentIdAndLevel();\n      var updateParam = {\n        id: this.updateId,\n        name: this.form.name,\n        code: this.form.code,\n        icon: this.form.icon,\n        url: this.form.url,\n        type: this.form.type,\n        parentId: this.form.parentId,\n        level: this.form.level,\n        sort: this.form.sort,\n        state: this.form.state,\n        remark: this.form.remark\n      };\n      sysPermissionApi.update(updateParam).then(function (response) {\n        if (response.code === 200) {\n          _this7.restForm();\n\n          _this7.$message({\n            message: '修改系统菜单成功',\n            type: 'success'\n          });\n\n          _this7.$emit('change');\n        }\n      });\n    },\n    restForm: function restForm() {\n      this.$refs.sysMenuForm.resetFields();\n      this.dialogVisible = false;\n    }\n  }\n};",null]}