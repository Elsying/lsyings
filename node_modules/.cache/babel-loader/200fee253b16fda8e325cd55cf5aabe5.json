{"remainingRequest":"D:\\Desktop\\pagepro\\lsying\\node_modules\\thread-loader\\dist\\cjs.js!D:\\Desktop\\pagepro\\lsying\\node_modules\\babel-loader\\lib\\index.js!D:\\Desktop\\pagepro\\lsying\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Desktop\\pagepro\\lsying\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Desktop\\pagepro\\lsying\\src\\views\\device\\list\\components\\dialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\Desktop\\pagepro\\lsying\\src\\views\\device\\list\\components\\dialog.vue","mtime":1609980005248},{"path":"D:\\Desktop\\pagepro\\lsying\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Desktop\\pagepro\\lsying\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Desktop\\pagepro\\lsying\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\Desktop\\pagepro\\lsying\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\Desktop\\pagepro\\lsying\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport deviceApi from '@/api/device/device-list-api';\nimport UserDialog from \"./userDialog\";\nexport default {\n  name: 'DeviceDialog',\n  components: {\n    UserDialog: UserDialog\n  },\n  props: {\n    // detail: 详细页面，add: 添加页面，update：编辑页面\n    isDetail: {\n      type: Boolean,\n      default: false\n    },\n    isAdd: {\n      type: Boolean,\n      default: false\n    },\n    isUpdate: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data: function data() {\n    return {\n      dialogVisible: false,\n      dialogTitle: null,\n      form: {\n        id: null,\n        username: null,\n        dname: null,\n        did: null,\n        remarks: null // state: 1\n\n      },\n      updateId: null,\n      rules: {\n        dname: [{\n          required: true,\n          message: '请输入设备名称',\n          trigger: 'blur'\n        } // { required: true, message: '请输入设备名称', trigger: 'blur' }\n        // { min: 4, max: 16, message: '长度在 2 到 10 个字符', trigger: 'blur' }\n        ],\n        did: [{\n          required: true,\n          message: '请输入设备编号',\n          trigger: 'blur'\n        }] // state: [\n        //   { required: true, message: '请选择状态', trigger: 'change' }\n        // ]\n\n      }\n    };\n  },\n  computed: {},\n  created: function created() {},\n  methods: {\n    handle: function handle(id) {\n      // alert(111)\n      if (this.isDetail) {\n        console.log('detail...' + id);\n        this.rules = null;\n        this.dialogTitle = '设备详情';\n        this.getRoleDetail(id);\n      } else if (this.isAdd) {\n        console.log('add...');\n        this.dialogTitle = '新增设备';\n      } else if (this.isUpdate) {\n        console.log('update...');\n        this.dialogTitle = '修改设备';\n        this.updateId = id;\n        this.getRoleDetail(id);\n      }\n\n      this.dialogVisible = true;\n    },\n    submitAddForm: function submitAddForm() {\n      var _this = this;\n\n      this.$refs.DeviceDialogForm.validate(function (valid) {\n        if (valid) {\n          console.log('submit!');\n\n          _this.addRole(); // this.$emit(\"getList\")\n\n        } else {\n          console.log('error submit!!');\n          return false;\n        }\n      });\n    },\n    submitUpdateForm: function submitUpdateForm() {\n      var _this2 = this;\n\n      this.$refs.DeviceDialogForm.validate(function (valid) {\n        if (valid) {\n          console.log('submit!');\n\n          _this2.updateRole(); // this.$emit(\"getList\")\n\n        } else {\n          console.log('error submit!!');\n          return false;\n        }\n      });\n    },\n    getRoleDetail: function getRoleDetail(id) {\n      var _this3 = this;\n\n      deviceApi.detail(id).then(function (response) {\n        if (response.code === 200) {\n          _this3.form = response.data;\n        }\n      });\n    },\n    addRole: function addRole() {\n      var _this4 = this;\n\n      var addParam = {\n        did: this.form.did,\n        dname: this.form.dname,\n        remarks: this.form.remarks // state: this.form.state\n\n      };\n      console.log(addParam);\n      deviceApi.add(addParam).then(function (response) {\n        if (response.code === 200) {\n          _this4.restForm();\n\n          _this4.$message({\n            message: '保存设备成功',\n            type: 'success'\n          });\n\n          _this4.$emit('change');\n        }\n      });\n    },\n    updateRole: function updateRole() {\n      var _this5 = this;\n\n      var updateParam = {\n        id: this.updateId,\n        did: this.form.did,\n        // username: this.form.username,\n        dname: this.form.dname,\n        remarks: this.form.remarks // state: this.form.state\n\n      };\n      deviceApi.update(updateParam).then(function (response) {\n        if (response.code === 200) {\n          _this5.restForm();\n\n          _this5.$message({\n            message: '修改设备成功',\n            type: 'success'\n          });\n\n          _this5.$emit('change');\n        }\n      });\n    },\n    restForm: function restForm() {\n      this.$refs.DeviceDialogForm.resetFields();\n      this.dialogVisible = false;\n    },\n    handOpenUserDialog: function handOpenUserDialog() {\n      var _this6 = this;\n\n      this.$nextTick(function () {\n        _this6.$refs.userDialog.handle();\n      });\n    },\n    handleSave: function handleSave(row) {\n      console.log(row, '-=-=-=-=-=-=');\n    }\n  }\n};",null]}