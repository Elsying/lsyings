{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-21be6748\"],{\"007a\":function(e,t,i){\"use strict\";i(\"18c2\")},\"18c2\":function(e,t,i){},\"3a0f\":function(e,t,i){\"use strict\";i(\"c0f8\")},\"3c2a\":function(e,t,i){},6269:function(e,t,i){\"use strict\";var a=i(\"b775\"),l={getPageList:function(e,t){var i=t?\"/deviceCommodity/getPageList\":\"/deviceCommodity/getPageListByuser\";return Object(a[\"a\"])({url:i,method:\"post\",data:e})},detail:function(e){return Object(a[\"a\"])({url:\"/deviceCommodity/info/\"+e,method:\"get\"})},add:function(e){return Object(a[\"a\"])({url:\"/deviceCommodity/add\",method:\"post\",data:e})},update:function(e){return Object(a[\"a\"])({url:\"/deviceCommodity/update\",method:\"post\",data:e})},delete:function(e){return Object(a[\"a\"])({url:\"/deviceCommodity/delete/\"+e,method:\"post\"})}};t[\"a\"]=l},7689:function(e,t,i){\"use strict\";i(\"3c2a\")},c0f8:function(e,t,i){},cfe7:function(e,t,i){\"use strict\";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"div\",{staticClass:\"app-container\",attrs:{id:\"device-list\"}},[i(\"div\",{staticClass:\"filter-container\"},[i(\"el-button\",{staticStyle:{\"margin-left\":\"10px\",width:\"92px\"},attrs:{type:\"primary\",icon:\"el-icon-edit\"},on:{click:e.handleAdd}},[e._v(\"添加\\n      \")])],1),e._v(\" \"),i(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.listLoading,expression:\"listLoading\"}],key:e.tableKey,staticStyle:{width:\"100%\"},attrs:{data:e.list,border:\"\",fit:\"\",\"highlight-current-row\":\"\"},on:{\"sort-change\":e.sortChange}},[i(\"el-table-column\",{attrs:{label:\"编号\",prop:\"id\",sortable:\"custom\",align:\"center\",width:\"80px\",\"class-name\":e.getSortClass(\"id\")},scopedSlots:e._u([{key:\"default\",fn:function(t){var a=t.row;return[i(\"span\",[e._v(e._s(a.id))])]}}])}),e._v(\" \"),i(\"el-table-column\",{attrs:{label:\"用户\",\"min-width\":\"110px\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){var a=t.row;return[i(\"span\",[e._v(e._s(a.username))])]}}])}),e._v(\" \"),i(\"el-table-column\",{attrs:{label:\"设备编号\",\"min-width\":\"110px\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){var a=t.row;return[i(\"span\",[e._v(e._s(a.did))])]}}])}),e._v(\" \"),i(\"el-table-column\",{attrs:{label:\"设备名称\",\"min-width\":\"150px\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){var a=t.row;return[i(\"span\",[e._v(e._s(a.dname))])]}}])}),e._v(\" \"),i(\"el-table-column\",{attrs:{label:\"备注说明\",\"min-width\":\"150px\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){var a=t.row;return[i(\"span\",[e._v(e._s(a.remarks))])]}}])}),e._v(\" \"),i(\"el-table-column\",{attrs:{label:\"产品数量\",\"min-width\":\"150px\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){var a=t.row;return[i(\"span\",[e._v(e._s(a.commoditynum))])]}}])}),e._v(\" \"),i(\"el-table-column\",{attrs:{label:\"创建时间\",prop:\"createTime\",sortable:\"custom\",\"min-width\":\"160px\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){var a=t.row;return[i(\"span\",[e._v(e._s(a.createTime))])]}}])}),e._v(\" \"),i(\"el-table-column\",{attrs:{align:\"center\",width:\"240\",\"class-name\":\"operation\"},scopedSlots:e._u([{key:\"default\",fn:function(t){var a=t.row;return[i(\"el-link\",{attrs:{type:\"primary\"},on:{click:function(t){return e.handDetail(a.id)}}},[e._v(\"详情\")]),e._v(\" \"),i(\"el-link\",{attrs:{type:\"warning\"},on:{click:function(t){return e.handUpdate(a.id)}}},[e._v(\"修改\")]),e._v(\" \"),i(\"el-link\",{attrs:{type:\"danger\"},on:{click:function(t){return e.handleDelete(a.id,a.dname)}}},[e._v(\"删除\")])]}}])},[i(\"template\",{slot:\"header\"},[e._v(\"\\n          操作\\n          \"),i(\"el-dropdown\",{attrs:{trigger:\"click\"}},[i(\"el-link\",{staticStyle:{\"vertical-align\":\"baseline\"},attrs:{type:\"primary\"}},[i(\"i\",{staticClass:\"el-icon-s-operation\"})]),e._v(\" \"),i(\"el-dropdown-menu\",{attrs:{slot:\"dropdown\"},slot:\"dropdown\"},[i(\"el-dropdown-item\",[i(\"el-checkbox\",{model:{value:e.tableColumnChecked,callback:function(t){e.tableColumnChecked=t},expression:\"tableColumnChecked\"}},[e._v(\"角色名称\")])],1),e._v(\" \"),i(\"el-dropdown-item\",[i(\"el-checkbox\",{model:{value:e.tableColumnChecked,callback:function(t){e.tableColumnChecked=t},expression:\"tableColumnChecked\"}},[e._v(\"角色编码\")])],1),e._v(\" \"),i(\"el-dropdown-item\",[i(\"el-checkbox\",{model:{value:e.tableColumnChecked,callback:function(t){e.tableColumnChecked=t},expression:\"tableColumnChecked\"}},[e._v(\"角色备注\")])],1),e._v(\" \"),i(\"el-dropdown-item\",[i(\"el-checkbox\",{model:{value:e.tableColumnChecked,callback:function(t){e.tableColumnChecked=t},expression:\"tableColumnChecked\"}},[e._v(\"状态\")])],1)],1)],1),e._v(\" \"),i(\"el-link\",{staticStyle:{\"vertical-align\":\"baseline\",margin:\"0px 3px\"},attrs:{type:\"primary\"}},[i(\"i\",{staticClass:\"el-icon-document\"})]),e._v(\" \"),i(\"el-link\",{staticStyle:{\"vertical-align\":\"baseline\"},attrs:{type:\"primary\"}},[i(\"i\",{staticClass:\"el-icon-printer\"})])],1)],2)],1),e._v(\" \"),i(\"pagination\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.total>0,expression:\"total>0\"}],attrs:{total:e.total,page:e.listQuery.pageIndex,limit:e.listQuery.pageSize},on:{\"update:page\":function(t){return e.$set(e.listQuery,\"pageIndex\",t)},\"update:limit\":function(t){return e.$set(e.listQuery,\"pageSize\",t)},pagination:e.getList}}),e._v(\" \"),i(\"device-dialog\",{ref:\"detailPage\",attrs:{\"is-detail\":\"\"}}),e._v(\" \"),i(\"device-dialog\",{ref:\"addPage\",attrs:{\"is-add\":\"\"},on:{change:e.getList}}),e._v(\" \"),i(\"device-dialog\",{ref:\"updatePage\",attrs:{\"is-update\":\"\"},on:{change:e.getList}})],1)},l=[],n=(i(\"6762\"),i(\"2fdb\"),i(\"6724\")),o=i(\"333d\"),s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"el-dialog\",{attrs:{title:e.dialogTitle,visible:e.dialogVisible,\"close-on-click-modal\":!1,\"custom-class\":\"page-dialog sys-role-dialog\"},on:{\"update:visible\":function(t){e.dialogVisible=t}}},[i(\"el-form\",{ref:\"DeviceDialogForm\",staticClass:\"page-form\",staticStyle:{width:\"100%\"},attrs:{rules:e.rules,model:e.form,\"label-position\":\"right\",\"label-width\":\"80px\"}},[i(\"el-form-item\",{attrs:{label:\"设备名称\",prop:\"dname\"}},[i(\"el-input\",{attrs:{readonly:e.isDetail,oninput:\"value=value.replace(/[^a-z0-9]+/gi, '')\"},model:{value:e.form.dname,callback:function(t){e.$set(e.form,\"dname\",t)},expression:\"form.dname\"}})],1),e._v(\" \"),i(\"el-form-item\",{attrs:{label:\"设备编号\",prop:\"did\"}},[i(\"el-input\",{attrs:{readonly:e.isDetail},model:{value:e.form.did,callback:function(t){e.$set(e.form,\"did\",t)},expression:\"form.did\"}})],1),e._v(\" \"),e.isDetail?i(\"el-form-item\",{attrs:{label:\"用户\",prop:\"username\"}},[i(\"el-input\",{attrs:{readonly:e.isDetail},model:{value:e.form.username,callback:function(t){e.$set(e.form,\"username\",t)},expression:\"form.username\"}})],1):e._e(),e._v(\" \"),i(\"el-form-item\",{attrs:{label:\"备注\",prop:\"remarks\"}},[i(\"el-input\",{attrs:{autosize:{minRows:2,maxRows:4},type:\"textarea\",placeholder:\"请输入备注\",readonly:e.isDetail},model:{value:e.form.remarks,callback:function(t){e.$set(e.form,\"remarks\",t)},expression:\"form.remarks\"}})],1)],1),e._v(\" \"),i(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[e.isDetail?[i(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){e.dialogVisible=!1}}},[e._v(\"关闭\")])]:e.isAdd?[i(\"el-button\",{on:{click:function(t){return e.restForm()}}},[e._v(\"取消\")]),e._v(\" \"),i(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.submitAddForm()}}},[e._v(\"保存\")])]:e.isUpdate?[i(\"el-button\",{on:{click:function(t){return e.restForm()}}},[e._v(\"取消\")]),e._v(\" \"),i(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.submitUpdateForm()}}},[e._v(\"修改\")])]:e._e()],2),e._v(\" \"),i(\"UserDialog\",{ref:\"userDialog\",on:{save:e.handleSave}})],1)},r=[],d=i(\"6269\"),c=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i(\"el-dialog\",{attrs:{\"append-to-body\":\"\",width:\"80%\",title:e.dialogTitle,visible:e.dialogVisible,\"custom-class\":\"page-dialog sys-role-dialog\"},on:{\"update:visible\":function(t){e.dialogVisible=t}}},[i(\"SysUserList\",{attrs:{\"is-pick\":!0},on:{save:e.handleSave}}),e._v(\" \"),i(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[i(\"el-button\",{on:{click:function(t){return e.restForm()}}},[e._v(\"取消\")]),e._v(\" \"),e.row.id?i(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(t){return e.submitAddForm()}}},[e._v(\"保存\")]):e._e()],1)],1)},u=[],m=i(\"528b\"),f={name:\"DeviceUserDialog\",components:{SysUserList:m[\"default\"]},props:{},data:function(){return{dialogVisible:!1,dialogTitle:null,row:{}}},computed:{},created:function(){},methods:{handle:function(e){this.dialogVisible=!0},submitAddForm:function(){this.$emit(\"save\",this.row),this.dialogVisible=!1},restForm:function(){this.dialogVisible=!1},handleSave:function(e){this.row=e}}},p=f,h=(i(\"3a0f\"),i(\"2877\")),g=Object(h[\"a\"])(p,c,u,!1,null,\"d869a8f0\",null),v=g.exports,b={name:\"DeviceDialog\",components:{UserDialog:v},props:{isDetail:{type:Boolean,default:!1},isAdd:{type:Boolean,default:!1},isUpdate:{type:Boolean,default:!1}},data:function(){return{dialogVisible:!1,dialogTitle:null,form:{id:null,username:null,dname:null,did:null,remarks:null},updateId:null,rules:{dname:[{required:!0,message:\"请输入设备名称\",trigger:\"blur\"}],did:[{required:!0,message:\"请输入设备编号\",trigger:\"blur\"}]}}},computed:{},created:function(){},methods:{handle:function(e){this.isDetail?(console.log(\"detail...\"+e),this.rules=null,this.dialogTitle=\"设备详情\",this.getRoleDetail(e)):this.isAdd?(console.log(\"add...\"),this.dialogTitle=\"新增设备\"):this.isUpdate&&(console.log(\"update...\"),this.dialogTitle=\"修改设备\",this.updateId=e,this.getRoleDetail(e)),this.dialogVisible=!0},submitAddForm:function(){var e=this;this.$refs.DeviceDialogForm.validate((function(t){if(!t)return console.log(\"error submit!!\"),!1;console.log(\"submit!\"),e.addRole()}))},submitUpdateForm:function(){var e=this;this.$refs.DeviceDialogForm.validate((function(t){if(!t)return console.log(\"error submit!!\"),!1;console.log(\"submit!\"),e.updateRole()}))},getRoleDetail:function(e){var t=this;d[\"a\"].detail(e).then((function(e){200===e.code&&(t.form=e.data)}))},addRole:function(){var e=this,t={did:this.form.did,dname:this.form.dname,remarks:this.form.remarks};console.log(t),d[\"a\"].add(t).then((function(t){200===t.code&&(e.restForm(),e.$message({message:\"保存设备成功\",type:\"success\"}),e.$emit(\"change\"))}))},updateRole:function(){var e=this,t={id:this.updateId,did:this.form.did,dname:this.form.dname,remarks:this.form.remarks};d[\"a\"].update(t).then((function(t){200===t.code&&(e.restForm(),e.$message({message:\"修改设备成功\",type:\"success\"}),e.$emit(\"change\"))}))},restForm:function(){this.$refs.DeviceDialogForm.resetFields(),this.dialogVisible=!1},handOpenUserDialog:function(){var e=this;this.$nextTick((function(){e.$refs.userDialog.handle()}))},handleSave:function(e){console.log(e,\"-=-=-=-=-=-=\")}}},y=b,_=(i(\"007a\"),Object(h[\"a\"])(y,s,r,!1,null,\"4fc4329d\",null)),k=_.exports,w={name:\"DeviceList\",components:{DeviceDialog:k,Pagination:o[\"a\"]},directives:{waves:n[\"a\"]},filters:{statusFilter:function(e){return 0===e?\"info\":1===e?\"success\":2===e?\"warning\":void 0}},data:function(){return{tableKey:0,list:null,total:0,listLoading:!0,sortColumn:\"id\",sortAsc:!1,listQuery:{pageIndex:1,pageSize:10,keyword:null,name:null,code:null,state:null,pageSorts:[]},stateOptions:[{label:\"已删除\",value:1},{label:\"未删除\",value:0}],tableColumnChecked:null,searchColumn:\"keyword\",searchValue:null,searchOptions:[{label:\"全部\",value:\"keyword\"},{label:\"角色名称\",value:\"name\"},{label:\"角色编码\",value:\"code\"}],createTimeRange:null,showReviewer:!0,dialogStatus:\"\",textMap:{update:\"Edit\",create:\"Create\"},dialogPvVisible:!1,pvData:[],downloadLoading:!1}},created:function(){this.setDefaultSort(),this.getList()},methods:{getList:function(){var e=this;this.listLoading=!0;var t=JSON.parse(sessionStorage.userInfo).loginSysUserVo.permissionCodes.includes(\"admin:device:page\");d[\"a\"].getPageList(this.listQuery,t).then((function(t){e.list=t.data.records,e.total=t.data.total,e.listLoading=!1}))},handleFilter:function(){this.listQuery.pageIndex=1,this.listQuery.keyword=null,this.listQuery.name=null,this.listQuery.code=null,this.listQuery[this.searchColumn]=this.searchValue,this.getList()},setDefaultSort:function(){this.listQuery.pageSorts=[{column:this.sortColumn,asc:this.sortAsc}]},sortChange:function(e){var t=e.prop,i=e.order;this.sortColumn=\"createTime\"===t?\"create_time\":t,this.sortAsc=\"ascending\"===i,this.listQuery.pageSorts=[{column:this.sortColumn,asc:this.sortAsc}],this.handleFilter()},getSortClass:function(e){return this.sortColumn===e?this.sortAsc?\"ascending\":\"descending\":\"\"},handleAdd:function(){var e=this;this.dialogStatus=\"create\",this.$nextTick((function(){e.$refs.addPage.handle()}))},handDetail:function(e){var t=this;this.$nextTick((function(){t.$refs.detailPage.handle(e)}))},handUpdate:function(e){var t=this;this.$nextTick((function(){t.$refs.updatePage.handle(e)}))},handleDelete:function(e,t){var i=this;this.$confirm(\"您确定要删除 \"+t+\" ?\",\"删除提示\",{confirmButtonText:\"确定\",cancelButtonText:\"取消\",type:\"warning\"}).then((function(){d[\"a\"].delete(e).then((function(e){200===e.code&&(i.$message({type:\"success\",message:\"删除成功!\"}),i.handleFilter())}))}))}}},C=w,x=(i(\"7689\"),Object(h[\"a\"])(C,a,l,!1,null,null,null));t[\"default\"]=x.exports}}]);","extractedComments":[]}