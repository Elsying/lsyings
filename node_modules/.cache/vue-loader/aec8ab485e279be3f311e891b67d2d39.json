{"remainingRequest":"C:\\Users\\r7000\\Desktop\\pagepro\\lsying\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\r7000\\Desktop\\pagepro\\lsying\\src\\views\\device\\list\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\r7000\\Desktop\\pagepro\\lsying\\src\\views\\device\\list\\index.vue","mtime":1609569561000},{"path":"C:\\Users\\r7000\\Desktop\\pagepro\\lsying\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\r7000\\Desktop\\pagepro\\lsying\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\r7000\\Desktop\\pagepro\\lsying\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\r7000\\Desktop\\pagepro\\lsying\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport waves from '@/directive/waves'\nimport Pagination from '@/components/Pagination'\n\nimport DeviceDialog from './components/dialog'\n\nimport deviceApi from '@/api/device/device-list-api'\n\nexport default {\n  name: 'DeviceList',\n  components: { DeviceDialog, Pagination },\n  directives: { waves },\n  filters: {\n    statusFilter(status) {\n      if (status === 0) {\n        return \"info\";\n      } else if (status === 1) {\n        return \"success\";\n      } else if (status === 2) {\n        return \"warning\";\n      }\n    }\n  },\n  data() {\n    return {\n      tableKey: 0,\n      list: null,\n      total: 0,\n      listLoading: true,\n      sortColumn: 'id',\n      sortAsc: false,\n      listQuery: {\n        pageIndex: 1,\n        pageSize: 10,\n        keyword: null,\n        name: null,\n        code: null,\n        state: null,\n        pageSorts: []\n      },\n      stateOptions: [\n        { label: '已删除', value: 1 },\n        { label: '未删除', value: 0 }\n      ],\n      tableColumnChecked: null,\n      searchColumn: 'keyword',\n      searchValue: null,\n      searchOptions: [\n        { label: '全部', value: 'keyword' },\n        { label: '角色名称', value: 'name' },\n        { label: '角色编码', value: 'code' }\n      ],\n      createTimeRange: null,\n      showReviewer: true,\n      dialogStatus: '',\n      textMap: {\n        update: 'Edit',\n        create: 'Create'\n      },\n      dialogPvVisible: false,\n      pvData: [],\n      downloadLoading: false\n    }\n  },\n  created() {\n    this.setDefaultSort()\n    this.getList()\n  },\n  methods: {\n    getList() {\n      this.listLoading = true\n      const isAdmin = JSON.parse(sessionStorage.userInfo).loginSysUserVo.permissionCodes.includes('admin:device:page')\n      deviceApi.getPageList(this.listQuery, isAdmin).then(response => {\n        this.list = response.data.records\n        this.total = response.data.total\n        this.listLoading = false\n      });\n    },\n    handleFilter() {\n      this.listQuery.pageIndex = 1\n      this.listQuery.keyword = null;\n      this.listQuery.name = null;\n      this.listQuery.code = null;\n      this.listQuery[this.searchColumn] = this.searchValue;\n      this.getList()\n    },\n    setDefaultSort() {\n      // 设置默认排序\n      this.listQuery.pageSorts = [{\n        column: this.sortColumn,\n        asc: this.sortAsc\n      }]\n    },\n    sortChange(data) {\n      const { prop, order } = data\n      if (prop === 'createTime') {\n        this.sortColumn = 'create_time'\n      } else {\n        this.sortColumn = prop\n      }\n      this.sortAsc = order === 'ascending'\n      this.listQuery.pageSorts = [{\n        column: this.sortColumn,\n        asc: this.sortAsc\n      }]\n      this.handleFilter()\n    },\n    getSortClass: function(key) {\n      if (this.sortColumn === key) {\n        return this.sortAsc ? 'ascending' : 'descending'\n      } else {\n        return ''\n      }\n    },\n    handleAdd() {\n      this.dialogStatus = 'create'\n      this.$nextTick(() => {\n        this.$refs.addPage.handle()\n      });\n    },\n    handDetail(id) {\n      this.$nextTick(() => {\n        this.$refs.detailPage.handle(id)\n      });\n    },\n    handUpdate(id) {\n      this.$nextTick(() => {\n        this.$refs.updatePage.handle(id)\n      });\n    },\n    handleDelete(id, dname) {\n      this.$confirm('您确定要删除 ' + dname + ' ?', '删除提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        deviceApi.delete(id).then(response => {\n          if (response.code === 200) {\n            this.$message({\n              type: 'success',\n              message: '删除成功!'\n            });\n            this.handleFilter()\n          }\n        })\n      })\n    }\n  }\n}\n",null]}