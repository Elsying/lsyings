{"remainingRequest":"C:\\Users\\r7000\\Desktop\\pagepro\\lsying\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\r7000\\Desktop\\pagepro\\lsying\\src\\views\\system\\sys-role\\components\\sys-role.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\r7000\\Desktop\\pagepro\\lsying\\src\\views\\system\\sys-role\\components\\sys-role.vue","mtime":1609569561000},{"path":"C:\\Users\\r7000\\Desktop\\pagepro\\lsying\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\r7000\\Desktop\\pagepro\\lsying\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\r7000\\Desktop\\pagepro\\lsying\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport sysRoleApi from '@/api/system/sys-role-api'\n\nexport default {\n  name: 'SysRole',\n  props: {\n    // detail: 详细页面，add: 添加页面，update：编辑页面\n    isDetail: {\n      type: Boolean,\n      default: false\n    },\n    isAdd: {\n      type: Boolean,\n      default: false\n    },\n    isUpdate: {\n      type: Boolean,\n      default: false\n    }\n  },\n  data() {\n    return {\n      dialogVisible: false,\n      dialogTitle: null,\n      form: {\n        id: null,\n        name: null,\n        code: null,\n        remark: null,\n        state: 1\n      },\n      updateId: null,\n      rules: {\n        name: [\n          { required: true, message: '请输入角色名称', trigger: 'blur' },\n          { min: 4, max: 16, message: '长度在 2 到 10 个字符', trigger: 'blur' }\n        ],\n        code: [\n          { required: true, message: '请输入角色编码', trigger: 'blur' },\n          { min: 4, max: 10, message: '长度在 4 到 20 个字符', trigger: 'blur' }\n        ],\n        state: [\n          { required: true, message: '请选择状态', trigger: 'change' }\n        ]\n      }\n    }\n  },\n  computed: {},\n  created() {\n\n  },\n  methods: {\n    handle(id) {\n      // alert(111)\n      if (this.isDetail) {\n        console.log('detail...' + id)\n        this.rules = null;\n        this.dialogTitle = '系统角色详情';\n        this.getRoleDetail(id);\n      } else if (this.isAdd) {\n        console.log('add...')\n        this.dialogTitle = '新增系统角色';\n      } else if (this.isUpdate) {\n        console.log('update...')\n        this.dialogTitle = '修改系统角色';\n        this.updateId = id;\n        this.getRoleDetail(id);\n      }\n      this.dialogVisible = true\n    },\n    submitAddForm() {\n      this.$refs.sysRoleForm.validate((valid) => {\n        if (valid) {\n          console.log('submit!')\n          this.addRole()\n          // this.$emit(\"getList\")\n        } else {\n          console.log('error submit!!')\n          return false\n        }\n      });\n    },\n    submitUpdateForm() {\n      this.$refs.sysRoleForm.validate((valid) => {\n        if (valid) {\n          console.log('submit!')\n          this.updateRole()\n          // this.$emit(\"getList\")\n        } else {\n          console.log('error submit!!')\n          return false\n        }\n      });\n    },\n    getRoleDetail(id) {\n      sysRoleApi.detail(id).then(response => {\n        if (response.code === 200) {\n          this.form = response.data;\n        }\n      });\n    },\n    addRole() {\n      const addParam = {\n        name: this.form.name,\n        code: this.form.code,\n        remark: this.form.remark,\n        state: this.form.state\n      }\n      console.log(addParam)\n      sysRoleApi.add(addParam).then(response => {\n        if (response.code === 200) {\n          this.restForm();\n          this.$message({\n            message: '保存系统角色成功',\n            type: 'success'\n          })\n          this.$emit('change')\n        }\n      })\n    },\n    updateRole() {\n      const updateParam = {\n        id: this.updateId,\n        name: this.form.name,\n        code: this.form.code,\n        remark: this.form.remark,\n        state: this.form.state\n      }\n      sysRoleApi.update(updateParam).then(response => {\n        if (response.code === 200) {\n          this.restForm();\n          this.$message({\n            message: '修改系统角色成功',\n            type: 'success'\n          })\n          this.$emit('change')\n        }\n      })\n    },\n    restForm() {\n      this.$refs.sysRoleForm.resetFields()\n      this.dialogVisible = false\n    }\n  }\n}\n",null]}